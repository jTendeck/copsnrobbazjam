[gd_scene load_steps=10 format=3 uid="uid://cq1lv3ipkuep4"]

[ext_resource type="Script" uid="uid://hsh5qogtx5jk" path="res://scenes/jt-player/jt_player.gd" id="1_otjgg"]
[ext_resource type="Texture2D" uid="uid://cljkbc2pl1mof" path="res://assets/sprites/robber.png" id="2_5fpss"]
[ext_resource type="PackedScene" uid="uid://48hjk77flwlx" path="res://scenes/projectiles/molotov.tscn" id="3_8s0qe"]
[ext_resource type="PackedScene" uid="uid://ccc7fuj4v6mge" path="res://scenes/projectiles/weapon_component.tscn" id="3_ruceb"]
[ext_resource type="PackedScene" uid="uid://6nps6us7vogw" path="res://scenes/projectiles/bullet.tscn" id="4_8s0qe"]
[ext_resource type="PackedScene" uid="uid://c1ulpdj67b0do" path="res://scenes/components/money-picker-upper.tscn" id="6_x0eo3"]

[sub_resource type="CapsuleShape2D" id="CapsuleShape2D_5fpss"]
radius = 28.0
height = 128.0

[sub_resource type="CapsuleShape2D" id="CapsuleShape2D_ruceb"]
radius = 23.0
height = 120.0

[sub_resource type="CircleShape2D" id="CircleShape2D_a6loi"]
radius = 135.148

[node name="JtRobber" type="CharacterBody2D" node_paths=PackedStringArray("primary_weapon", "secondary_weapon", "hurt_box", "fire_hurt_timer", "money_carry_location", "camera_follow_pos")]
z_index = 1
collision_mask = 13
script = ExtResource("1_otjgg")
non_aiming_walk_speed = 500.0
accelerate_walk_rate = 2000.0
decelerate_walk_rate = 1800.0
primary_weapon = NodePath("PrimaryWeapon")
secondary_weapon = NodePath("SecondaryWeapon")
hurt_box = NodePath("Hurtbox")
fire_hurt_timer = NodePath("FireHurtTimer")
money_carry_location = NodePath("Money-picker-upper/Marker2D")
camera_follow_pos = NodePath("CameraFollow")
metadata/_custom_type_script = "uid://hsh5qogtx5jk"

[node name="Sprite2D" type="Sprite2D" parent="."]
texture = ExtResource("2_5fpss")
offset = Vector2(31.345, 0)

[node name="CollisionShape2D" type="CollisionShape2D" parent="."]
shape = SubResource("CapsuleShape2D_5fpss")

[node name="ShootLocation" type="Marker2D" parent="."]
position = Vector2(107, 0)

[node name="PrimaryWeapon" parent="." node_paths=PackedStringArray("fire_location", "shooter") instance=ExtResource("3_ruceb")]
projectile = ExtResource("4_8s0qe")
fire_location = NodePath("../ShootLocation")
projectile_speed = 4000.0
time_between_shots = 0.25
shooter = NodePath("..")

[node name="SecondaryWeapon" parent="." node_paths=PackedStringArray("fire_location", "shooter") instance=ExtResource("3_ruceb")]
projectile = ExtResource("3_8s0qe")
fire_location = NodePath("../ShootLocation")
time_between_shots = 4.0
can_reload = false
number_of_mags = 1
projectiles_per_mag = 3
shooter = NodePath("..")

[node name="Hurtbox" type="Area2D" parent="."]
collision_layer = 0
collision_mask = 34

[node name="CollisionShape2D" type="CollisionShape2D" parent="Hurtbox"]
shape = SubResource("CapsuleShape2D_ruceb")

[node name="FireHurtTimer" type="Timer" parent="."]
wait_time = 0.75

[node name="Money-picker-upper" parent="." node_paths=PackedStringArray("robber_owner") instance=ExtResource("6_x0eo3")]
robber_owner = NodePath("..")

[node name="Marker2D" type="Marker2D" parent="Money-picker-upper"]
position = Vector2(-41, 0)

[node name="CollisionShape2D" type="CollisionShape2D" parent="Money-picker-upper"]
shape = SubResource("CircleShape2D_a6loi")

[node name="CameraFollow" type="Marker2D" parent="."]
position = Vector2(100, 0)

[connection signal="area_entered" from="Hurtbox" to="." method="_on_hurtbox_hit"]
[connection signal="area_exited" from="Hurtbox" to="." method="_on_hurtbox_body_exited"]
[connection signal="body_entered" from="Hurtbox" to="." method="_on_hurtbox_hit"]
[connection signal="body_exited" from="Hurtbox" to="." method="_on_hurtbox_body_exited"]
[connection signal="timeout" from="FireHurtTimer" to="." method="_on_fire_hurt_timer_timeout"]
